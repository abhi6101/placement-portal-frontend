<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCA Exam Papers</title>
    <style>
        /* Your existing CSS rules go here */
        :root {
            --primary: #00d4ff;
            --secondary: #0077b6;
            --dark: #03045e;
            --light: #f8f9fa;
            --gray: #6c757d;
            --accent: #ff7b00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light);
            color: #333;
            line-height: 1.6;
            margin: 0; /* Remove default body margin */
        }

        /* Container specific to this page, adapting to new design */
        .container {
            max-width: 900px;
            margin: 40px auto; /* Increased margin for better spacing */
            background-color: #fff;
            padding: 30px; /* Increased padding */
            border-radius: 10px; /* More rounded corners */
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); /* Enhanced shadow */
        }

        h1 {
            text-align: center;
            color: var(--dark); /* Use dark variable */
            margin-bottom: 30px;
            font-size: 2.5rem; /* Larger heading */
        }

        .filter-section {
            margin-bottom: 30px; /* More space below filter */
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px; /* Space between label and input */
        }

        .filter-section label {
            font-weight: 600; /* Bolder label */
            color: var(--secondary); /* Use secondary color */
            font-size: 1.1em;
        }

        .filter-section input[type="text"],
        .filter-section select { /* Added select to this style */
            padding: 12px 15px; /* More padding */
            width: 80%; /* Wider input */
            max-width: 500px; /* Increased max-width */
            border: 1px solid #cceeff; /* Lighter border */
            border-radius: 30px; /* Pill-shaped input */
            font-size: 17px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.08); /* Inner shadow */
            transition: all 0.3s ease;
            appearance: none; /* Remove default select arrow */
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%230077b6%22%20d%3D%22M287%2C197.96l-14.73-14.73l-123.6-123.6l-123.6%2C123.6l-14.73%2C14.73L146.46%2C292.4L287%2C197.96z%22%2F%3E%3C%2Fsvg%3E'); /* Custom arrow */
            background-repeat: no-repeat;
            background-position: right 15px top 50%;
            background-size: 12px auto;
            cursor: pointer;
        }

        .filter-section input[type="text"]:focus,
        .filter-section select:focus { /* Added select to this focus style */
            outline: none;
            border-color: var(--primary); /* Highlight on focus */
            box-shadow: 0 0 8px rgba(0, 212, 255, 0.3); /* Glow effect */
        }

        .files-list {
            list-style: none;
            padding: 0;
        }

        .files-list li {
            background-color: #ffffff; /* White background for list items */
            margin-bottom: 12px; /* More space between items */
            padding: 15px 20px; /* More padding */
            border-radius: 8px; /* Slightly rounded corners */
            display: flex;
            justify-content: space-between; /* This will push filename to left, tag+button to right */
            align-items: center;
            border: 1px solid #eee; /* Light border */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* Subtle shadow */
            transition: all 0.3s ease;
        }

        .files-list li:hover {
            background-color: #f0f8ff; /* Light blue on hover */
            transform: translateY(-3px); /* Lift effect */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Enhanced shadow on hover */
        }

        /* Adjusted style for the file name link */
        .files-list li a {
            text-decoration: none;
            color: var(--dark); /* Use dark variable for link color */
            font-weight: bold;
            font-size: 1.1em;
            word-break: break-word;
            flex-grow: 1; /* Allows link to take up available space */
            margin-right: 15px; /* Space between filename and subject info */
        }

        .files-list li a:hover {
            color: var(--primary); /* Primary color on link hover */
            text-decoration: underline;
        }

        .download-btn {
            background-color: var(--secondary); /* Use secondary color for button */
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.2s ease;
            white-space: nowrap; /* Prevent button text from wrapping */
            margin-left: 10px; /* Space between subject tag and button */
        }

        .download-btn:hover {
            background-color: var(--primary); /* Lighter blue on hover */
            transform: translateY(-1px);
        }

        .subject-tag-container { /* Container for subject tag and its download button */
            display: flex;
            align-items: center;
            white-space: nowrap; /* Prevent items from wrapping in this container */
        }

        .subject-tag {
            background-color: var(--primary); /* Primary color for tag */
            color: white;
            padding: 6px 12px; /* More padding */
            border-radius: 20px; /* More rounded tag */
            font-size: 0.85em;
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0, 212, 255, 0.2); /* Tag shadow */
            /* No margin-right here, as button comes immediately after */
        }

        .no-results {
            text-align: center;
            color: var(--gray); /* Use gray variable */
            padding: 30px;
            font-size: 1.1em;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        /* Optional: Add a subtle header for a more complete look */
        .header-bar {
            background-color: var(--dark);
            color: white;
            padding: 1rem 2rem;
            text-align: center;
            margin-bottom: 40px; /* Space between header and container */
            font-size: 1.5rem;
            font-weight: 700;
        }

        .header-bar span {
            color: var(--primary);
        }

        /* Styles for the new subject filter section */
        .subject-filter-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 20px; /* Space above this filter group */
        }
    </style>
</head>
<body>
    <div class="header-bar">
        MCA <span>Exam Papers</span> Explorer
    </div>
    <div class="container">
        <h1>MCA Exam Papers</h1>

        <div class="filter-section">
            <label for="textFilter">Filter by Filename:</label>
            <input type="text" id="textFilter" placeholder="e.g., May 2024">
        </div>

        <div class="filter-section subject-filter-group">
            <label for="subjectSelect">Filter by Subject:</label>
            <select id="subjectSelect">
                <option value="">All Subjects</option>
                </select>
        </div>

        <ul id="filesList" class="files-list">
        </ul>
    </div>
<script src="paperfile.js"></script>
<script>
  // Map to store subject to semester mapping for quick lookup
const subjectToSemesterMap = {
    "Fundamental of Computer Science & IT": 1,
    "Discrete Mathematics": 1,
    "Communication Skills in English": 1,
    "Programming and Problem Solving in C": 1,
    "Digital Electronics": 1,
    "PC Software and Office Tools- Lab I": 1,
    "Computer Architecture": 2,
    "Data Structure using C": 2,
    "Statistics": 2,
    "Technical Communication & Personality Development": 2,
    "Principal of Management": 2,
    "Language Lab": 2,
    "Programming Lab in Data Structure using C": 2,
    "System Software": 3,
    "Computer Oriented Numerical Methods": 3,
    "Web Designing in HTML": 3,
    "Aptitude Skills and Reasoning": 3,
    "DBMS": 3,
    "Web Page Design Lab": 3,
    "Programming Lab in DBMS": 3,
    "Operating Systems": 4,
    "Foundation of Computer Networks": 4,
    "System Analysis and Design": 4,
    "Accounting and Financial Management": 4,
    "Computer Oriented Optimization Techniques": 4,
    "Lab in Operating Systems": 4,
    "Lab in VB and MS Access": 4,
    "Object Oriented Programming in C++": 5,
    "Principles of Programming Language": 5,
    "Advanced Web Designing": 5,
    "Computer Graphics": 5,
    "Software Engineering": 5,
    "Lab in Web Designing": 5,
    "Analysis Design of Algorithm": 6,
    "Advanced Computer Networks": 6,
    "Advanced DBMS": 6,
    "Theory of Computation": 6,
    "Artificial Intelligence": 6,
    "Lab in ADA using C++": 6,
    "Minor Project - I": 6,
    "Cloud Computing": 7,
    "Data Sciences in Mining": 7,
    "File Structures": 7,
    // Electives I and II won't have a direct subject name mapping from the syllabus
    "Minor Project - II": 7,
    "Soft Computing": 8,
    "Distributed Systems": 8,
    "Network Security": 8,
    // Electives III and IV won't have a direct subject name mapping from the syllabus
    "Minor Project - III": 8,
    "Internship": 9,
    "Dissertation Work / Project / Case Study": 10
};

// Function to extract a simplified subject and semester from the filename
function getSubjectAndSemester(filename) {
    let subject = "Miscellaneous";
    let semester = "N/A"; // Not Applicable or Unknown

    const lowerFilename = filename.toLowerCase();

    // First, try to extract from MCADD-xxx pattern for subject and semester
    const mcaddMatch = lowerFilename.match(/mcadd-(\d+)([a-z]?)*/); // Added (a-z)? to match optional character after number
    if (mcaddMatch && mcaddMatch[1]) {
        const codeNum = parseInt(mcaddMatch[1], 10);
        // Correctly derive semester for MCADD-1001
        if (codeNum === 1001) {
            semester = 10;
        } else if (codeNum >= 101 && codeNum <= 106) {
            semester = 1;
        } else if (codeNum >= 201 && codeNum <= 207) {
            semester = 2;
        } else if (codeNum >= 301 && codeNum <= 307) {
            semester = 3;
        } else if (codeNum >= 401 && codeNum <= 407) {
            semester = 4;
        } else if (codeNum >= 501 && codeNum <= 506) {
            semester = 5;
        } else if (codeNum >= 601 && codeNum <= 607) {
            semester = 6;
        } else if (codeNum >= 701 && codeNum <= 707) { // Includes electives and projects
            semester = 7;
        } else if (codeNum >= 801 && codeNum <= 807) { // Includes electives and projects
            semester = 8;
        } else if (codeNum === 901) {
            semester = 9;
        }
    }


    // Specific subject mapping based on syllabus and common file name patterns
    if (lowerFilename.includes("fundamental_of_computer_science_it") || lowerFilename.includes("fcsit")) {
        subject = "Fundamental of Computer Science & IT";
        if (semester === "N/A") semester = 1;
    } else if (lowerFilename.includes("discrete_mathematics") || lowerFilename.includes("dm")) {
        subject = "Discrete Mathematics";
        if (semester === "N/A") semester = 1;
    } else if (lowerFilename.includes("communication_skills_in_english") || lowerFilename.includes("cse")) {
        subject = "Communication Skills in English";
        if (semester === "N/A") semester = 1;
    } else if (lowerFilename.includes("programming_and_problem_solving_in_c") || lowerFilename.includes("c_november") || lowerFilename.includes("c_may")) { // Added c_may as well
        subject = "Programming and Problem Solving in C";
        if (semester === "N/A") semester = 1;
    } else if (lowerFilename.includes("digital_electronics") || lowerFilename.includes("de")) {
        subject = "Digital Electronics";
        if (semester === "N/A") semester = 1;
    } else if (lowerFilename.includes("pc_software_and_office_tools") || lowerFilename.includes("pc_software")) {
        subject = "PC Software and Office Tools- Lab I";
        if (semester === "N/A") semester = 1;
    }
    // Semester 2
    else if (lowerFilename.includes("ca") || lowerFilename.includes("computer_architecture")) {
        subject = "Computer Architecture";
        if (semester === "N/A") semester = 2;
    } else if (lowerFilename.includes("ds") || lowerFilename.includes("data_structure_using_c") || lowerFilename.includes("data_structure")) {
        subject = "Data Structure using C";
        if (semester === "N/A") semester = 2;
    } else if (lowerFilename.includes("statistics") || lowerFilename.includes("stat")) {
        subject = "Statistics";
        if (semester === "N/A") semester = 2;
    } else if (lowerFilename.includes("technical_communication") || lowerFilename.includes("tcpd")) {
        subject = "Technical Communication & Personality Development";
        if (semester === "N/A") semester = 2;
    } else if (lowerFilename.includes("pom") || lowerFilename.includes("principal_of_management")) {
        subject = "Principal of Management";
        if (semester === "N/A") semester = 2;
    } else if (lowerFilename.includes("language_lab") || lowerFilename.includes("llab")) {
        subject = "Language Lab";
        if (semester === "N/A") semester = 2;
    }
    // Semester 3
    else if (lowerFilename.includes("ss") || lowerFilename.includes("system_software")) {
        subject = "System Software";
        if (semester === "N/A") semester = 3;
    } else if (lowerFilename.includes("coot") || lowerFilename.includes("computer_oriented_optimization_techniques")) {
        subject = "Computer Oriented Optimization Techniques";
        if (semester === "N/A") semester = 3; // Note: Syllabus lists COOT in Sem 4, but file names are often generic or indicate early use
    } else if (lowerFilename.includes("web_designing_in_html") || lowerFilename.includes("web_designing") || lowerFilename.includes("wdhtml")) {
        subject = "Web Designing in HTML";
        if (semester === "N/A") semester = 3;
    } else if (lowerFilename.includes("aptitude")) {
        subject = "Aptitude Skills and Reasoning";
        if (semester === "N/A") semester = 3;
    } else if (lowerFilename.includes("dbms")) {
        subject = "DBMS";
        if (semester === "N/A") semester = 3;
    }
    // Semester 4
    else if (lowerFilename.includes("os") || lowerFilename.includes("operating_systems")) {
        subject = "Operating Systems";
        if (semester === "N/A") semester = 4;
    } else if (lowerFilename.includes("acn") || lowerFilename.includes("foundation_of_computer_networks") || lowerFilename.includes("fcn")) {
        subject = "Foundation of Computer Networks";
        if (semester === "N/A") semester = 4;
    } else if (lowerFilename.includes("sad") || lowerFilename.includes("system_analysis_and_design")) {
        subject = "System Analysis and Design";
        if (semester === "N/A") semester = 4;
    } else if (lowerFilename.includes("accounting") || lowerFilename.includes("financial_management")) {
        subject = "Accounting and Financial Management";
        if (semester === "N/A") semester = 4;
    }
    // Semester 5
    else if (lowerFilename.includes("oops") || lowerFilename.includes("object_oriented_programming_in_c++") || lowerFilename.includes("oops_c")) {
        subject = "Object Oriented Programming in C++";
        if (semester === "N/A") semester = 5;
    } else if (lowerFilename.includes("ppl") || lowerFilename.includes("principles_of_programming_language")) {
        subject = "Principles of Programming Language";
        if (semester === "N/A") semester = 5;
    } else if (lowerFilename.includes("awt") || lowerFilename.includes("advanced_web_designing")) {
        subject = "Advanced Web Designing";
        if (semester === "N/A") semester = 5;
    } else if (lowerFilename.includes("cg") || lowerFilename.includes("computer_graphics")) {
        subject = "Computer Graphics";
        if (semester === "N/A") semester = 5;
    } else if (lowerFilename.includes("se") || lowerFilename.includes("software_engineering")) {
        subject = "Software Engineering";
        if (semester === "N/A") semester = 5;
    }
    // Semester 6
    else if (lowerFilename.includes("ada") || lowerFilename.includes("analysis_design_of_algorithm")) { // Assuming ADA refers to Analysis Design of Algorithm
        subject = "Analysis Design of Algorithm";
        if (semester === "N/A") semester = 6;
    } else if (lowerFilename.includes("advanced_computer_networks") || lowerFilename.includes("acn_advanced")) {
        subject = "Advanced Computer Networks";
        if (semester === "N/A") semester = 6;
    } else if (lowerFilename.includes("adbms") || lowerFilename.includes("advanced_dbms")) {
        subject = "Advanced DBMS";
        if (semester === "N/A") semester = 6;
    } else if (lowerFilename.includes("theory_of_computation") || lowerFilename.includes("toc")) {
        subject = "Theory of Computation";
        if (semester === "N/A") semester = 6;
    } else if (lowerFilename.includes("ai") || lowerFilename.includes("artificial_intelligence")) {
        subject = "Artificial Intelligence";
        if (semester === "N/A") semester = 6;
    }
    // Semester 7
    else if (lowerFilename.includes("cloud_computing")) {
        subject = "Cloud Computing";
        if (semester === "N/A") semester = 7;
    } else if (lowerFilename.includes("data_science") || lowerFilename.includes("data_sciences_in_mining")) {
        subject = "Data Sciences in Mining";
        if (semester === "N/A") semester = 7;
    } else if (lowerFilename.includes("file_structure")) {
        subject = "File Structures";
        if (semester === "N/A") semester = 7;
    }
    // Semester 8
    else if (lowerFilename.includes("soft_computing")) {
        subject = "Soft Computing";
        if (semester === "N/A") semester = 8;
    } else if (lowerFilename.includes("distributed_systems")) {
        subject = "Distributed Systems";
        if (semester === "N/A") semester = 8;
    } else if (lowerFilename.includes("network_security")) {
        subject = "Network Security";
        if (semester === "N/A") semester = 8;
    }
    // Semester 9 & 10
    else if (lowerFilename.includes("internship")) {
        subject = "Internship";
        if (semester === "N/A") semester = 9;
    } else if (lowerFilename.includes("dissertation") || lowerFilename.includes("project") || lowerFilename.includes("case_study")) {
        subject = "Dissertation Work / Project / Case Study";
        if (semester === "N/A") semester = 10;
    }


    // Fallback: Use existing subject extraction logic if no specific match found yet
    if (subject === "Miscellaneous") {
        if (lowerFilename.includes("account")) subject = "Account";
        else if (lowerFilename.includes("conm")) subject = "Computer Network Management"; // Assuming CONM for CNM in older papers
        else if (lowerFilename.includes("digital_image_p")) subject = "Digital Image Processing";
        else if (lowerFilename.includes("imca")) subject = "Integrated MCA";
        else if (lowerFilename.includes("java") || lowerFilename.includes("programming_in_jav")) subject = "Programming in Java";
        else if (lowerFilename.includes("mobile_computing")) subject = "Mobile Computing";
        else if (lowerFilename.includes("multimedia")) subject = "Multimedia";
        else if (lowerFilename.includes("software_architect")) subject = "Software Architecture";
        else if (lowerFilename.includes("unix") || lowerFilename.includes("shell_pr")) subject = "Unix and Shell Programming";
        else if (lowerFilename.includes("web_technology") || lowerFilename.includes("wt-t") || lowerFilename.includes("wt_r") || lowerFilename.includes("wt_")) subject = "Web Technology";

        // If still miscellaneous, try to infer from MCADD for subject
        if (mcaddMatch && mcaddMatch[1]) {
            const mcaddCode = mcaddMatch[0];
            for (const key in subjectToSemesterMap) {
                if (lowerFilename.includes(key.toLowerCase().replace(/[^a-z0-9]/g, ''))) { // Simple match of course name fragments
                    subject = key;
                    break;
                }
            }
        }
    }

    // Attempt to set semester from subjectToSemesterMap if not already set
    if (semester === "N/A" && subject !== "Miscellaneous" && subjectToSemesterMap[subject]) {
        semester = subjectToSemesterMap[subject];
    }

    return { subject, semester };
}

const filesList = document.getElementById('filesList');
const textFilterInput = document.getElementById('textFilter');
const subjectSelect = document.getElementById('subjectSelect');
const semesterSelect = document.createElement('select'); // New semester select
semesterSelect.id = 'semesterSelect';
const filterSection = document.querySelector('.filter-section.subject-filter-group');
filterSection.parentNode.insertBefore(semesterSelect, filterSection.nextSibling); // Insert after subject select

// Add label for semester select
const semesterLabel = document.createElement('label');
semesterLabel.setAttribute('for', 'semesterSelect');
semesterLabel.textContent = 'Filter by Semester:';
filterSection.parentNode.insertBefore(semesterLabel, semesterSelect);


// Augment fileData with 'subject' and 'semester' properties
const processedFileData = fileData.map(file => {
    const { subject, semester } = getSubjectAndSemester(file.name);
    return {
        ...file,
        subject: subject,
        semester: semester
    };
});

// Get unique subjects for the dropdown
function getUniqueSubjects() {
    const subjects = new Set();
    processedFileData.forEach(file => {
        subjects.add(file.subject);
    });
    return Array.from(subjects).sort();
}

// Populate the subject dropdown
function populateSubjectDropdown() {
    subjectSelect.innerHTML = '<option value="">All Subjects</option>'; // Clear and add default
    const uniqueSubjects = getUniqueSubjects();
    uniqueSubjects.forEach(subject => {
        const option = document.createElement('option');
        option.value = subject;
        option.textContent = subject;
        subjectSelect.appendChild(option);
    });
}

// Get unique semesters for the dropdown
function getUniqueSemesters() {
    const semesters = new Set();
    processedFileData.forEach(file => {
        if (file.semester !== "N/A") {
            semesters.add(file.semester);
        }
    });
    return Array.from(semesters).sort((a, b) => a - b); // Sort numerically
}

// Populate the semester dropdown
function populateSemesterDropdown() {
    semesterSelect.innerHTML = '<option value="">All Semesters</option>'; // Clear and add default
    const uniqueSemesters = getUniqueSemesters();
    uniqueSemesters.forEach(sem => {
        const option = document.createElement('option');
        option.value = sem;
        option.textContent = `Semester ${sem}`;
        semesterSelect.appendChild(option);
    });
}


function renderFiles() {
    filesList.innerHTML = ''; // Clear current list

    const currentTextFilter = textFilterInput.value.toLowerCase().trim();
    const currentSubjectFilter = subjectSelect.value.toLowerCase();
    const currentSemesterFilter = semesterSelect.value === "" ? "" : parseInt(semesterSelect.value, 10);

    const filteredFiles = processedFileData.filter(file => {
        const matchesText = file.name.toLowerCase().includes(currentTextFilter) ||
                            file.subject.toLowerCase().includes(currentTextFilter);

        const matchesSubject = currentSubjectFilter === "" || file.subject.toLowerCase() === currentSubjectFilter;

        const matchesSemester = currentSemesterFilter === "" || file.semester === currentSemesterFilter;

        return matchesText && matchesSubject && matchesSemester;
    });

    if (filteredFiles.length === 0) {
        const noResultsItem = document.createElement('li');
        noResultsItem.className = 'no-results';
        noResultsItem.textContent = 'No files found matching your criteria.';
        filesList.appendChild(noResultsItem);
        return;
    }

    filteredFiles.forEach(file => {
        const listItem = document.createElement('li');

        const fileLink = document.createElement('a');
        fileLink.href = file.url;
        fileLink.textContent = file.name;
        fileLink.target = "_blank"; // Open link in a new tab
        fileLink.style.textDecoration = 'none';
        fileLink.style.color = 'var(--dark)';
        fileLink.style.fontWeight = 'bold';
        fileLink.style.fontSize = '1.1em';
        fileLink.style.wordBreak = 'break-word';
        fileLink.style.flexGrow = '1';
        fileLink.style.marginRight = '15px';

        const subjectTagContainer = document.createElement('div');
        subjectTagContainer.className = 'subject-tag-container';

        const subjectTag = document.createElement('span');
        subjectTag.className = 'subject-tag';
        subjectTag.textContent = file.subject;

        const semesterTag = document.createElement('span');
        semesterTag.className = 'subject-tag'; // Reuse styling
        semesterTag.style.backgroundColor = 'var(--accent)'; // Different color for semester
        semesterTag.style.marginLeft = '10px'; // Space between subject and semester
        semesterTag.textContent = file.semester !== "N/A" ? `Sem ${file.semester}` : 'N/A';

        const downloadButton = document.createElement('button');
        downloadButton.className = 'download-btn';
        downloadButton.textContent = 'Download';
        downloadButton.onclick = () => {
            window.open(file.url, '_blank');
        };

        subjectTagContainer.appendChild(subjectTag);
        if (file.semester !== "N/A") {
            subjectTagContainer.appendChild(semesterTag);
        }
        subjectTagContainer.appendChild(downloadButton);

        listItem.appendChild(fileLink);
        listItem.appendChild(subjectTagContainer);

        filesList.appendChild(listItem);
    });
}

// Initial setup: populate dropdowns and render all files
populateSubjectDropdown();
populateSemesterDropdown();
renderFiles();

// Add event listeners for all filter inputs
textFilterInput.addEventListener('input', renderFiles);
subjectSelect.addEventListener('change', renderFiles);
semesterSelect.addEventListener('change', renderFiles);
</script>
    <!-- <script>
        // Function to extract a simplified subject from the filename
        function getSubject(filename) {
            filename = filename.toLowerCase();
            if (filename.includes("account")) return "Account";
            if (filename.includes("acn") || filename.includes("advance_computer_network") || filename.includes("fcn")) return "Advanced Computer Network";
            if (filename.includes("ada")) return "Advanced Data Analytics";
            if (filename.includes("adbms")) return "Advanced DBMS";
            if (filename.includes("ai")) return "Artificial Intelligence";
            if (filename.includes("aptit") || filename.includes("aptitude")) return "Aptitude";
            if (filename.includes("awt")) return "Advanced Web Technology";
            if (filename.includes("c_november")) return "Programming in C"; // Specific to avoid "mcadd-202-data-structure-using-c-jun-2020.pdf" being just "C"
            if (filename.includes("ca") || filename.includes("computer_architecture")) return "Computer Architecture";
            if (filename.includes("cg") || filename.includes("cgm")) return "Computer Graphics";
            if (filename.includes("cloud_computing")) return "Cloud Computing";
            if (filename.includes("compiler_design")) return "Compiler Design";
            if (filename.includes("computer_ethics")) return "Computer Ethics";
            if (filename.includes("conm")) return "Computer Network Management"; // Assuming CONM for CNM
            if (filename.includes("coot")) return "Computer Oriented Optimization Techniques";
            if (filename.includes("data_analytics")) return "Data Analytics";
            if (filename.includes("data_science")) return "Data Science";
            if (filename.includes("dbms")) return "DBMS";
            if (filename.includes("digital_image_p")) return "Digital Image Processing";
            if (filename.includes("distributed_systems")) return "Distributed Systems";
            if (filename.includes("ds")) return "Data Structures";
            if (filename.includes("file_structure")) return "File Structure";
            if (filename.includes("imca")) return "Integrated MCA";
            if (filename.includes("java") || filename.includes("programming_in_jav")) return "Programming in Java";
            if (filename.includes("mobile_computing")) return "Mobile Computing";
            if (filename.includes("multimedia")) return "Multimedia";
            if (filename.includes("network_security")) return "Network Security";
            if (filename.includes("oops_c") || filename.includes("object-oriented-progr")) return "OOPS with C++"; // Assuming OOPS_C implies C++ context
            if (filename.includes("os") || filename.includes("operating_systems")) return "Operating Systems";
            if (filename.includes("parallel_computing")) return "Parallel Computing";
            if (filename.includes("pom") || filename.includes("principal-of-management")) return "Principles of Management";
            if (filename.includes("ppl") || filename.includes("principles-of-programming")) return "Principles of Programming Languages";
            if (filename.includes("sad") || filename.includes("system-analysis-and-design")) return "System Analysis and Design";
            if (filename.includes("se")) return "Software Engineering";
            if (filename.includes("soft_computing")) return "Soft Computing";
            if (filename.includes("software_architect")) return "Software Architecture";
            if (filename.includes("ss")) return "System Software";
            if (filename.includes("statistics")) return "Statistics";
            if (filename.includes("tcpd") || filename.includes("technical-communication")) return "Technical Communication & Professional Development";
            if (filename.includes("toc")) return "Theory of Computation";
            if (filename.includes("unix") || filename.includes("shell_pr")) return "Unix and Shell Programming";
            if (filename.includes("web_technology") || filename.includes("wt-t") || filename.includes("wt_r") || filename.includes("wt_")) return "Web Technology";
            if (filename.includes("mcadd-404-accounting")) return "Accounting & Finance";

            // Fallback: If no specific subject is found, try to extract the first word
            const parts = filename.split('_');
            if (parts.length > 0) {
                const firstWord = parts[0].replace(/[^a-z0-9]/g, ''); // Remove non-alphanumeric
                if (firstWord.length > 0) {
                    return firstWord.charAt(0).toUpperCase() + firstWord.slice(1);
                }
            }
            return "Miscellaneous"; // Default if no clear subject
        }

        const filesList = document.getElementById('filesList');
        const textFilterInput = document.getElementById('textFilter');
        const subjectSelect = document.getElementById('subjectSelect');

        // Augment fileData with a 'subject' property
        const processedFileData = fileData.map(file => ({
            ...file,
            subject: getSubject(file.name)
        }));

        // Get unique subjects for the dropdown
        function getUniqueSubjects() {
            const subjects = new Set();
            processedFileData.forEach(file => {
                subjects.add(file.subject);
            });
            return Array.from(subjects).sort(); // Convert to array and sort alphabetically
        }

        // Populate the subject dropdown
        function populateSubjectDropdown() {
            const uniqueSubjects = getUniqueSubjects();
            uniqueSubjects.forEach(subject => {
                const option = document.createElement('option');
                option.value = subject;
                option.textContent = subject;
                subjectSelect.appendChild(option);
            });
        }

        function renderFiles() {
            filesList.innerHTML = ''; // Clear current list

            const currentTextFilter = textFilterInput.value.toLowerCase().trim();
            const currentSubjectFilter = subjectSelect.value.toLowerCase();

            const filteredFiles = processedFileData.filter(file => {
                const matchesText = file.name.toLowerCase().includes(currentTextFilter) ||
                                    file.subject.toLowerCase().includes(currentTextFilter);

                const matchesSubject = currentSubjectFilter === "" || file.subject.toLowerCase() === currentSubjectFilter;

                return matchesText && matchesSubject;
            });

            if (filteredFiles.length === 0) {
                const noResultsItem = document.createElement('li');
                noResultsItem.className = 'no-results';
                noResultsItem.textContent = 'No files found matching your criteria.';
                filesList.appendChild(noResultsItem);
                return;
            }

            filteredFiles.forEach(file => {
                const listItem = document.createElement('li');

                // The filename will now be a direct link again, without a button next to it
                const fileLink = document.createElement('a');
                fileLink.href = file.url;
                fileLink.textContent = file.name;
                fileLink.target = "_blank"; // Open link in a new tab
                // Apply original filename styles
                fileLink.style.textDecoration = 'none';
                fileLink.style.color = 'var(--dark)';
                fileLink.style.fontWeight = 'bold';
                fileLink.style.fontSize = '1.1em';
                fileLink.style.wordBreak = 'break-word';
                fileLink.style.flexGrow = '1';
                fileLink.style.marginRight = '15px'; // Space between filename and subject info


                // Container for subject tag and its download button
                const subjectTagContainer = document.createElement('div');
                subjectTagContainer.className = 'subject-tag-container';

                const subjectTag = document.createElement('span');
                subjectTag.className = 'subject-tag';
                subjectTag.textContent = file.subject;

                // This is the ONLY download button per row now
                const downloadButton = document.createElement('button');
                downloadButton.className = 'download-btn';
                downloadButton.textContent = 'Download';
                downloadButton.onclick = () => {
                    window.open(file.url, '_blank');
                };

                subjectTagContainer.appendChild(subjectTag);
                subjectTagContainer.appendChild(downloadButton); // Append the button next to the tag


                listItem.appendChild(fileLink); // Append the filename link
                listItem.appendChild(subjectTagContainer); // Append the subject tag and its button

                filesList.appendChild(listItem);
            });
        }

        // Initial setup: populate dropdown and render all files
        populateSubjectDropdown();
        renderFiles();

        // Add event listeners for both filter inputs
        textFilterInput.addEventListener('input', renderFiles);
        subjectSelect.addEventListener('change', renderFiles);
    </script> -->
</body>
</html>